{"version":3,"sources":["scripts/main.js"],"names":["cells","document","querySelectorAll","score","querySelector","startMessage","winMessage","loseMessage","rows","addTile","emptyCells","filter","cell","textContent","length","randomIndex","Math","floor","random","randomNumber","classList","add","restart","forEach","className","moveUp","index","colNums","row","push","num","i","addCorrectClasses","moveDown","reverse","unshift","moveRight","rowNums","innerHTML","moveLeft","gameOverCheck","fullFieldCells","beforeCheckCells","map","scoreBeforeCheck","every","remove","winCheck","win","some","addEventListener","e","target","contains","key"],"mappings":"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","file":"main.5e7c86be.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst cells = document.querySelectorAll('.field-cell');\nconst score = document.querySelector('.game-score');\nconst startMessage = document.querySelector('.message-start');\nconst winMessage = document.querySelector('.message-win');\nconst loseMessage = document.querySelector('.message-lose');\nconst rows = document.querySelectorAll('.field-row');\n\nfunction addTile() {\n  const emptyCells = [...cells].filter(cell => !cell.textContent);\n\n  if (emptyCells.length === 0) {\n    return;\n  }\n\n  const randomIndex = Math.floor(Math.random() * emptyCells.length);\n  const randomNumber = Math.random() < 0.9 ? '2' : '4';\n\n  if (randomNumber === '2') {\n    emptyCells[randomIndex].classList.add('field-cell--2');\n  } else {\n    emptyCells[randomIndex].classList.add('field-cell--4');\n  }\n  emptyCells[randomIndex].classList.add('field-cell--animation');\n  emptyCells[randomIndex].textContent = randomNumber;\n}\n\nfunction restart() {\n  [...cells].forEach(cell => {\n    cell.className = 'field-cell';\n    cell.textContent = '';\n  });\n  score.textContent = 0;\n  loseMessage.classList.add('hidden');\n  winMessage.classList.add('hidden');\n}\n\ndocument.addEventListener('click', (e) => {\n  if (e.target.classList.contains('start')) {\n    e.target.classList.remove('start');\n    e.target.classList.add('restart');\n    e.target.textContent = 'Restart';\n    startMessage.classList.add('hidden');\n\n    addTile();\n    addTile();\n  } else if (e.target.classList.contains('restart')) {\n    restart();\n    addTile();\n    addTile();\n  }\n});\n\nfunction moveUp(index) {\n  let colNums = [];\n\n  rows.forEach(row => {\n    colNums.push(+row.cells[index].textContent);\n  });\n\n  colNums = colNums.filter(num => !!num);\n\n  for (let i = 0; i < colNums.length - 1; i++) {\n    if (colNums[i] === colNums[i + 1]) {\n      score.textContent = +score.textContent + colNums[i] * 2;\n      colNums[i] *= 2;\n      colNums[i + 1] = 0;\n    }\n  }\n\n  colNums = colNums.filter(num => !!num);\n\n  while (colNums.length < 4) {\n    colNums.push(0);\n  }\n\n  rows.forEach((row, i) => {\n    row.cells[index].textContent = colNums[i] || '';\n  });\n  addCorrectClasses();\n}\n\nfunction moveDown(index) {\n  let colNums = [];\n\n  rows.forEach(row => {\n    colNums.push(+row.cells[index].textContent);\n  });\n\n  colNums = colNums.reverse().filter(num => !!num);\n\n  for (let i = 0; i < colNums.length - 1; i++) {\n    if (colNums[i] === colNums[i + 1]) {\n      score.textContent = +score.textContent + colNums[i] * 2;\n      colNums[i] *= 2;\n      colNums[i + 1] = 0;\n    }\n  }\n\n  colNums = colNums.reverse().filter(num => !!num);\n\n  while (colNums.length < 4) {\n    colNums.unshift(0);\n  }\n\n  rows.forEach((row, i) => {\n    row.cells[index].textContent = colNums[i] || '';\n  });\n  addCorrectClasses();\n}\n\nfunction moveRight() {\n  rows.forEach(row => {\n    let rowNums = [];\n\n    [...row.cells].forEach(cell => rowNums.push(+cell.innerHTML));\n\n    rowNums = rowNums.reverse().filter(num => !!num);\n\n    for (let i = 0; i < rowNums.length - 1; i++) {\n      if (rowNums[i] === rowNums[i + 1]) {\n        score.textContent = +score.textContent + rowNums[i] * 2;\n        rowNums[i] *= 2;\n        rowNums[i + 1] = 0;\n      }\n    }\n\n    rowNums = rowNums.reverse().filter(num => !!num);\n\n    while (rowNums.length < 4) {\n      rowNums.unshift(0);\n    }\n\n    [...row.cells].forEach((cell, i) => {\n      cell.textContent = rowNums[i] || '';\n    });\n  });\n  addCorrectClasses();\n}\n\nfunction moveLeft() {\n  rows.forEach(row => {\n    let rowNums = [];\n\n    [...row.cells].forEach(cell => rowNums.push(+cell.innerHTML));\n\n    rowNums = rowNums.filter(num => !!num);\n\n    for (let i = 0; i < rowNums.length - 1; i++) {\n      if (rowNums[i] === rowNums[i + 1]) {\n        score.textContent = +score.textContent + rowNums[i] * 2;\n        rowNums[i] *= 2;\n        rowNums[i + 1] = 0;\n      }\n    }\n\n    rowNums = rowNums.filter(num => !!num);\n\n    while (rowNums.length < 4) {\n      rowNums.push(0);\n    }\n\n    [...row.cells].forEach((cell, i) => {\n      cell.textContent = rowNums[i] || '';\n    });\n  });\n  addCorrectClasses();\n}\n\nfunction addCorrectClasses() {\n  for (const cell of cells) {\n    cell.className = 'field-cell';\n\n    switch (cell.textContent) {\n      case '2': cell.classList.add('field-cell--2'); break;\n      case '4': cell.classList.add('field-cell--4'); break;\n      case '8': cell.classList.add('field-cell--8'); break;\n      case '16': cell.classList.add('field-cell--16'); break;\n      case '32': cell.classList.add('field-cell--32'); break;\n      case '64': cell.classList.add('field-cell--64'); break;\n      case '128': cell.classList.add('field-cell--128'); break;\n      case '256': cell.classList.add('field-cell--256'); break;\n      case '512': cell.classList.add('field-cell--512'); break;\n      case '1024': cell.classList.add('field-cell--1024'); break;\n      case '2048': cell.classList.add('field-cell--2048'); break;\n    };\n  }\n}\n\nfunction gameOverCheck() {\n  const fullFieldCells = [...cells].filter(cell => !!cell.textContent);\n\n  if (fullFieldCells.length === 16) {\n    const beforeCheckCells = [...fullFieldCells].map(cell => cell.textContent);\n    const scoreBeforeCheck = score.textContent;\n\n    moveUp(0);\n    moveUp(1);\n    moveUp(2);\n    moveUp(3);\n    moveRight();\n\n    const changeCheck = [...cells].every((cell, i) => (\n      cell.textContent === beforeCheckCells[i]\n    ));\n\n    if (changeCheck) {\n      loseMessage.classList.remove('hidden');\n    }\n\n    [...cells].forEach((cell, i) => {\n      cell.textContent = beforeCheckCells[i];\n    });\n    addCorrectClasses();\n    score.textContent = scoreBeforeCheck;\n  }\n}\n\nfunction winCheck() {\n  const win = [...cells].some(cell => cell.textContent === '2048');\n\n  if (win) {\n    winMessage.classList.remove('hidden');\n\n    return true;\n  }\n\n  return false;\n}\n\ndocument.addEventListener('keydown', e => {\n  if (\n    document.querySelector('.start')\n    || !loseMessage.classList.contains('hidden')\n    || !winMessage.classList.contains('hidden')\n  ) {\n    return;\n  }\n\n  switch (e.key) {\n    case 'ArrowUp':\n      moveUp(0);\n      moveUp(1);\n      moveUp(2);\n      moveUp(3);\n      addTile();\n      addTile();\n      break;\n\n    case 'ArrowDown':\n      moveDown(0);\n      moveDown(1);\n      moveDown(2);\n      moveDown(3);\n      addTile();\n      addTile();\n      break;\n\n    case 'ArrowRight':\n      moveRight();\n      addTile();\n      addTile();\n      break;\n\n    case 'ArrowLeft':\n      moveLeft();\n      addTile();\n      addTile();\n      break;\n  }\n\n  if (winCheck()) {\n    return;\n  }\n  gameOverCheck();\n});\n"]}